## Задействуем продвинутые инструкции в Dockerfile

В этом задании вы создадите Dockerfile, в котором будут использоваться не только базовые (FROM, RUN, COPY, CMD, ENV), но и дополнительные инструкции (ARG, LABEL, USER, VOLUME, ONBUILD, STOPSIGNAL, HEALTHCHECK, SHELL). Мы объединим их в один образ, чтобы на практике увидеть, как каждая инструкция влияет на процесс сборки и работу контейнера.

### Техническое задание (ТЗ)

1. Базовый образ — python:3.9.
2. ARG: Укажите переменную для сборки ARG BUILD_MODE=dev. Выведите её значение во время RUN, чтобы видеть, что ARG сработал.
3. LABEL: Добавьте метаданные об образе: version, maintainer.
4. USER: Создайте непривилегированного пользователя (через RUN adduser или useradd) и переключитесь на него. Файлы приложения должны находиться в его домашней директории.
5. VOLUME: Объявите папку, куда приложение будет записывать данные (например, /home/myapp/data).
6. ONBUILD: Укажите хотя бы одну инструкцию (например, ONBUILD COPY . /home/myapp/extra), которая сработает, если этот образ будет использоваться как базовый.
7. STOPSIGNAL: Задайте иной сигнал (например, SIGQUIT) для остановки контейнера.
8. HEALTHCHECK: Настройте проверку «живости» контейнера. Например, используйте curl или python-скрипт, чтобы «проверять» ответ от приложения на порту 8080.
9. SHELL: Переключитесь на ["/bin/bash", "-c"], чтобы все RUN команды выполнялись в bash (это продемонстрирует альтернативный шелл).
10. Скопировать файл app.py (лежит рядом с Dockerfile) в папку пользователя /home/myapp. В нём пусть будет простой Flask-приложение (или любой другой код), которое слушает на порту 8080 и отвечает «Hello from Advanced Dockerfile!». Используйте ENV или ARG для задания порта, если хотите гибкости.
11. EXPOSE порт 8080 (чтобы указать, что контейнер слушает здесь).
12. CMD или ENTRYPOINT — запуск app.py (Flask или любое другое приложение). Убедитесь, что внутри app.py указано port=8080.
### Итог 
При запуске контейнера (например, -p 8080:8080) вы сможете перейти по адресу http://localhost:8080 и получить ответ от вашего приложения «Hello from Advanced Dockerfile!». В Docker-инспекторе (docker image inspect) будут видны LABEL. Если вы используете docker ps, то при наличии HEALTHCHECK статус будет «healthy» или «unhealthy». Остановка контейнера пошлёт сигнал SIGQUIT, а в образе будет объявлена папка-том для данных.