Nginx-приложение с собственной командной оболочкой, HealthCheck и StopSignal
В этом задании вы создадите Dockerfile для мини-сервера на Nginx, где продемонстрируете использование продвинутых инструкций: SHELL, STOPSIGNAL и HEALTHCHECK. Также добавим небольшой HTML-файл для проверки статической отдачи.

Зачем?
SHELL: По умолчанию в nginx:alpine используется оболочка sh. Мы хотим переключиться на bash или другую желаемую оболочку (хотя в Alpine может потребоваться установка пакета bash).
STOPSIGNAL: Docker обычно посылает SIGTERM при остановке контейнера. Мы хотим отправлять SIGQUIT или SIGUSR1, чтобы Nginx делал graceful shutdown по-особому.
HEALTHCHECK: Проверка, что Nginx действительно работает — например, периодически заходить на http://localhost/health. Если страница вернёт 200, то всё хорошо.
Техническое задание (ТЗ)
Базовый образ — nginx:alpine (или nginx:latest, если хотите).
SHELL: Переключитесь на ["/bin/bash", "-c"] (для Alpine обычно нужно сначала RUN apk add --no-cache bash).
STOPSIGNAL: Укажите SIGQUIT, чтобы при остановке контейнера Docker послал не стандартный SIGTERM, а иной сигнал.
HEALTHCHECK: Каждые 30s отправлять запрос curl -f http://localhost/health (или к другому эндпоинту, который вы пропишете в Nginx). Если получаем код 200, «healthy», иначе «unhealthy».
COPY: Копируйте локальный index.html в /usr/share/nginx/html. Создайте там файл health.html — при обращении к /health будет отдаваться (если вы в конфиге так настроите). Либо можно оставить /health = /index.html.
CMD (или оставьте дефолтный Nginx) — можете ничего не менять, ведь nginx:alpine уже знает, как запускаться, но при желании можно прописать CMD ["nginx", "-g", "daemon off;"].
Итог: При запуске контейнера (например, -p 8080:80) зайдите на http://localhost:8080 и убедитесь, что отдан ваш index.html. Контейнер будет получать SIGQUIT при остановке. Проверка docker ps покажет, что у контейнера есть статус healthcheck (healthy/unhealthy).