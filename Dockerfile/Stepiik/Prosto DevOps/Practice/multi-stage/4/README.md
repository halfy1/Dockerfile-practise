## Создаем оптимизированный Multi-stage Dockerfile для Python Flask приложения

В этом задании вы разработаете эффективный Multi-stage Dockerfile для Python Flask приложения, который разделит процесс разработки, тестирования и эксплуатации.

### Техническое задание

1. Стадия 1 (base):
    - Базовый образ — python:3.10-slim
    - Рабочая директория — /app
    - Установить только базовые зависимости, необходимые для всех стадий
    - Назвать эту стадию base
2. Стадия 2 (builder):
    - Базироваться на стадии base
    - Установить дополнительные пакеты, необходимые для компиляции (build-essential, python3-dev)
    - Скопировать requirements.txt
    - Преобразовать зависимости в wheel-пакеты с помощью pip wheel
    - Назвать эту стадию builder
3. Стадия 3 (development):
    - Базироваться на стадии base
    - Установить как основные, так и dev-зависимости из wheel-пакетов
    - Включить дополнительные инструменты для разработки (pytest, black)
    - Настроить переменную среды FLASK_ENV=development
    - Назвать эту стадию development
4. Стадия 4 (production):
    - Базироваться на стадии base
    - Установить только основные зависимости из wheel-пакетов, без dev-инструментов
    - Создать непривилегированного пользователя flask и назначить правильные разрешения
    - Скопировать исходный код приложения
    - Настроить переменные среды для production (FLASK_ENV=production, GUNICORN_WORKERS=4)
    - Открыть порт 5000
    - Запускать приложение с помощью gunicorn

### Структура проекта

- `Dockerfile` — создаваемый вами multi-stage файл
- `requirements.txt` — зависимости проекта
- `requirements-dev.txt` — дополнительные зависимости для разработки
- `app.py` — простое Flask-приложение
- `entrypoint.sh` — скрипт запуска для gunicorn