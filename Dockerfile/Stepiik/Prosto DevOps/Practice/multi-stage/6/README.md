## Оптимизация Docker-образа для Ruby on Rails приложения с multi-stage сборкой

В этом задании вы создадите эффективный Multi-stage Dockerfile для Rails-приложения, который отделит этап сборки зависимостей и ассетов от этапа запуска.

### Техническое задание
1. Стадия 1 (builder):
    - Базовый образ — ruby:3.1
    - Установить необходимые системные зависимости (nodejs, yarn, build-essential)
    - Установить гемы Rails через Bundler
    - Скомпилировать ассеты с помощью rails assets:precompile
    - Очистить временные файлы после компиляции ассетов
    - Назвать эту стадию builder
2. Стадия 2 (runtime):
    - Базовый образ — ruby:3.1-slim (меньший размер за счёт отсутствия компиляторов)
    - Установить минимальные необходимые системные зависимости
    - Скопировать установленные гемы из стадии builder
    - Скопировать код приложения и скомпилированные ассеты из builder
    - Создать непривилегированного пользователя для запуска приложения
    - Открыть порт 3000
    - Настроить запуск Rails-приложения в production-режиме

### Структура проекта

Предположим, что у вас есть стандартный проект Rails со следующей структурой:

- `Gemfile` и `Gemfile.lock` — список зависимостей Ruby
- app/, config/, db/ и т.д. — стандартные директории Rails
- `package.json` и `yarn.lock` — зависимости JavaScript (если используется)
- `Dockerfile` — файл, который вы создадите