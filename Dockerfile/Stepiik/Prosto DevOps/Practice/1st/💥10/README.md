## üí• Nginx —Å –±–∞–∑–æ–≤–æ–π –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–µ–π (Basic Auth)

–í —ç—Ç–æ–º –∑–∞–¥–∞–Ω–∏–∏ –≤—ã —Å–æ–∑–¥–∞–¥–∏—Ç–µ Dockerfile –¥–ª—è Nginx, –≥–¥–µ —á–∞—Å—Ç—å —Ä–µ—Å—É—Ä—Å–æ–≤ –±—É–¥–µ—Ç –∑–∞—â–∏—â–µ–Ω–∞ –±–∞–∑–æ–≤–æ–π –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–µ–π. –ü—Ä–∏ –ø–æ–ø—ã—Ç–∫–µ –¥–æ—Å—Ç—É–ø–∞ –∫ –∑–∞—â–∏—â—ë–Ω–Ω–æ–º—É –ø—É—Ç–∏ —Å–µ—Ä–≤–µ—Ä –ø–æ–ø—Ä–æ—Å–∏—Ç –≤–≤–µ—Å—Ç–∏ –ª–æ–≥–∏–Ω –∏ –ø–∞—Ä–æ–ª—å, —É–∫–∞–∑–∞–Ω–Ω—ã–µ –≤ htpasswd-—Ñ–∞–π–ª–µ.

### –°—Ü–µ–Ω–∞—Ä–∏–π

–î–æ–ø—É—Å—Ç–∏–º, –≤—ã —Ö–æ—Ç–∏—Ç–µ —Ä–∞–∑–¥–∞–≤–∞—Ç—å —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π –∫–æ–Ω—Ç–µ–Ω—Ç (–Ω–∞–ø—Ä–∏–º–µ—Ä, index.html) –ø—É–±–ª–∏—á–Ω–æ, –Ω–æ –ø—É—Ç—å /protected –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –¥–æ—Å—Ç—É–ø–µ–Ω —Ç–æ–ª—å–∫–æ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º. –ü—Ä–∏ –æ–±—Ä–∞—â–µ–Ω–∏–∏ –∫ /protected –±–µ–∑ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã—Ö —É—á—ë—Ç–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö —Å–µ—Ä–≤–µ—Ä –≤–µ—Ä–Ω—ë—Ç –æ—à–∏–±–∫—É –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ (401 Unauthorized).

### –¢–µ—Ö–Ω–∏—á–µ—Å–∫–æ–µ –∑–∞–¥–∞–Ω–∏–µ (–¢–ó)

1. –ë–∞–∑–æ–≤—ã–π –æ–±—Ä–∞–∑ ‚Äî nginx:alpine.
2. –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –≤–∞—à —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π —Ñ–∞–π–ª (index.html) –≤ /usr/share/nginx/html. (–ù–∞–ø—Ä–∏–º–µ—Ä, index.html –º–æ–∂–µ—Ç —Å–æ–¥–µ—Ä–∂–∞—Ç—å ¬´Welcome to public page¬ª.)
3. –°–æ–∑–¥–∞—Ç—å –≤ –ª–æ–∫–∞–ª—å–Ω–æ–π –ø–∞–ø–∫–µ —Ñ–∞–π–ª default.conf, –≥–¥–µ:
    - listen 80;
    - location / —Ä–∞–∑–¥–∞—ë—Ç —Å—Ç–∞—Ç–∏–∫—É (—É–∫–∞–∂–∏—Ç–µ root –∏–ª–∏ alias –≤ /usr/share/nginx/html).
    - location /protected –≤–∫–ª—é—á–∞–µ—Ç –±–∞–∑–æ–≤—É—é –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é:
    ```bash
    auth_basic "Restricted Content";
    auth_basic_user_file /etc/nginx/htpasswd;
    ```
    –ò, –Ω–∞–ø—Ä–∏–º–µ—Ä, –ø—Ä–æ—Å—Ç–æ return 200 "Protected resource!"; (–∏–ª–∏ —á—Ç–æ-—Ç–æ –ø–æ–¥–æ–±–Ω–æ–µ).
4. –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –ª–æ–∫–∞–ª—å–Ω—ã–π default.conf –≤ /etc/nginx/conf.d/default.conf.
5. –°–æ–∑–¥–∞—Ç—å —Ñ–∞–π–ª htpasswd (–ª–µ–∂–∏—Ç —Ä—è–¥–æ–º —Å Dockerfile), –≥–¥–µ –ø—Ä–æ–ø–∏—Å–∞–Ω –ª–æ–≥–∏–Ω/–ø–∞—Ä–æ–ª—å –≤ —Ñ–æ—Ä–º–∞—Ç–µ, —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–µ–º–æ–º Nginx. –ù–∞–ø—Ä–∏–º–µ—Ä, —Å –ø–æ–º–æ—â—å—é –∫–æ–º–∞–Ω–¥—ã (–≤ Linux/Mac):
    ```bash
    htpasswd -cb htpasswd admin admin123
    ```
    –¢–æ–≥–¥–∞ –≤ —Ñ–∞–π–ª–µ htpasswd –±—É–¥–µ—Ç —á—Ç–æ-—Ç–æ –≤—Ä–æ–¥–µ:
    ```bash
    admin:$apr1$qf...$...
    ```
6. –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å —ç—Ç–æ—Ç htpasswd —Ñ–∞–π–ª –≤ /etc/nginx/htpasswd.
7. EXPOSE 80 (–ø–æ—Ä—Ç –¥–ª—è Nginx).
8. –ù–µ –Ω—É–∂–Ω–æ –ø—Ä–æ–ø–∏—Å—ã–≤–∞—Ç—å CMD, —Ç–∞–∫ –∫–∞–∫ –≤ –±–∞–∑–æ–≤–æ–º –æ–±—Ä–∞–∑–µ —É–∂–µ —É–∫–∞–∑–∞–Ω–æ, –∫–∞–∫ –∑–∞–ø—É—Å–∫–∞—Ç—å Nginx.

### –ò—Ç–æ–≥ 

–ü—Ä–∏ –∑–∞–ø—É—Å–∫–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, -p 8080:80), http://localhost:8080 –±—É–¥–µ—Ç –æ—Ç–¥–∞–≤–∞—Ç—å index.html, –∞ –ø—Ä–∏ –æ–±—Ä–∞—â–µ–Ω–∏–∏ –∫ http://localhost:8080/protected —Å–µ—Ä–≤–µ—Ä –ø–æ—Ç—Ä–µ–±—É–µ—Ç –≤–≤–µ—Å—Ç–∏ –ª–æ–≥–∏–Ω admin –∏ –ø–∞—Ä–æ–ª—å admin123. –ï—Å–ª–∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–∞ ‚Äî –≤–µ—Ä–Ω—ë—Ç ¬´Protected resource!¬ª, –∏–Ω–∞—á–µ 401 Unauthorized.

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø–∞–ø–∫–∏
- `Dockerfile` ‚Äî –≤—ã —Å–æ–∑–¥–∞—ë—Ç–µ –ø–æ –¢–ó.
- `default.conf` ‚Äî –≤–∞—à Nginx-–∫–æ–Ω—Ñ–∏–≥, –≥–¥–µ –ø—Ä–æ–ø–∏—Å–∞–Ω—ã location / –∏ location /protected c –±–∞–∑–æ–≤–æ–π –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–µ–π.
- `htpasswd` ‚Äî —Ñ–∞–π–ª —Å –ª–æ–≥–∏–Ω–æ–º –∏ –ø–∞—Ä–æ–ª–µ–º –≤ —Ñ–æ—Ä–º–∞—Ç–µ, –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º–æ–º Nginx.
- `index.html` ‚Äî –≤–∞—à —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π —Ñ–∞–π–ª (–Ω–∞–ø—Ä–∏–º–µ—Ä, ¬´Welcome to public page!¬ª).